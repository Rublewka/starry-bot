# setup
import discord
import json
import os, os.path
import sys
import asyncio
import random
import http.client, urllib.request, urllib.parse, urllib.error, time
from discord.ext import commands, tasks
from config import settings
from misc import channelsids
prefix = settings['PREFIX']
client = commands.Bot(command_prefix = commands.when_mentioned_or(settings['PREFIX']), intents=discord.Intents.all())
client.remove_command('help') 
# setup end

#startup
@client.event
async def on_ready(): 

    print (f"[Logs:startup] Logged on as ") # startup message in console
    print ("""
‚ïî‚ïê‚ïê‚ïê‚ïó    ‚ïî‚ïó  ‚ïî‚ïó           ‚ïî‚ïó           ‚ïî‚ïê‚ïê‚ïó ‚ïî‚ïê‚ïê‚ïê‚ïó‚ïî‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë‚ïî‚ïê‚ïó‚ïë    ‚ïë‚ïë  ‚ïë‚ïë           ‚ïë‚ïë           ‚ïë‚ïî‚ïó‚ïë ‚ïë‚ïî‚ïê‚ïó‚ïë‚ïë‚ïî‚ïó‚ïî‚ïó‚ïë
‚ïë‚ïö‚ïê‚ïù‚ïë‚ïî‚ïó‚ïî‚ïó‚ïë‚ïö‚ïê‚ïó‚ïë‚ïë ‚ïî‚ïê‚ïê‚ïó‚ïî‚ïó‚ïî‚ïó‚ïî‚ïó‚ïë‚ïë‚ïî‚ïó‚ïî‚ïê‚ïê‚ïó     ‚ïë‚ïö‚ïù‚ïö‚ïó‚ïë‚ïë ‚ïë‚ïë‚ïö‚ïù‚ïë‚ïë‚ïö‚ïù
‚ïë‚ïî‚ïó‚ïî‚ïù‚ïë‚ïë‚ïë‚ïë‚ïë‚ïî‚ïó‚ïë‚ïë‚ïë ‚ïë‚ïî‚ïó‚ïë‚ïë‚ïö‚ïù‚ïö‚ïù‚ïë‚ïë‚ïö‚ïù‚ïù‚ïö ‚ïó‚ïë     ‚ïë‚ïî‚ïê‚ïó‚ïë‚ïë‚ïë ‚ïë‚ïë  ‚ïë‚ïë  
‚ïë‚ïë‚ïë‚ïö‚ïó‚ïë‚ïö‚ïù‚ïë‚ïë‚ïö‚ïù‚ïë‚ïë‚ïö‚ïó‚ïë‚ïë‚ïê‚ï£‚ïö‚ïó‚ïî‚ïó‚ïî‚ïù‚ïë‚ïî‚ïó‚ïó‚ïë‚ïö‚ïù‚ïö‚ïó    ‚ïë‚ïö‚ïê‚ïù‚ïë‚ïë‚ïö‚ïê‚ïù‚ïë ‚ïî‚ïù‚ïö‚ïó 
‚ïö‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïù ‚ïö‚ïù‚ïö‚ïù ‚ïö‚ïù‚ïö‚ïù‚ïö‚ïê‚ïê‚ïê‚ïù    ‚ïö‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïù 
   """)
    print("[Logs:startup] ____=====INFO=====____")
    print(f"[Logs:startup] Bot Info: {settings['NAME BOT']}")
    print(f"[Logs:startup] Bot ID: {settings['ID']}")
    rbs = client.get_channel(1076240177032351765)
    await rbs.send(f"""
@everyone        
Successfull restart!
        """) # startup message in status channel
    print (f"[Logs:startup] Successfully sent message to Rublewka Bot Status channel")
    print ("[Logs:startup] Bot start success")
    print ("[Logs:startup] ____=====INFO=====____")
    
#    await client.change_presence(activity=discord.Game(name="with TheSkout | ;help")) # presence
#    await client.change_presence(activity=discord.Activity(type=discord.ActivityType.watching, name="Rublewka | ;help")) # presence
#    await client.change_presence(activity=discord.Activity(type=discord.ActivityType.listening, name="Apple Music | ;help")) # presence


# startup end

# status
#async def st_sw():
#    await client.wait_until_ready()

#    statuses = ["with TheSkout | ;help", "Rublewka | ;help", "Apple Music | ;help"]

#    while not client.is_closed():
#        status = random.choice(statuses)
#        await client.change_presence(activity=discord.Game(name=status))
#        await asyncio.sleep(15)
# variables section


#prohibitedwords_path = '/home/container/prohibitednames.txt'
#prohibitedwords = open(prohibitedwords_path, 'r')

#bad_words = [prohibitedwords.read()]
# _______
# metrics
api_key = 'd5c8f50a-7e74-421e-a5ad-d62ed8d3ebdb'
page_id = '1423jz25bbfm'
metric_id = 'w3bdmlxfy40f'
api_base = 'https://api.statuspage.io/v1'
# metrics end
# ___________
# colors
default = 0
teal = 0x1abc9c
dark_teal = 0x11806a
green = 0x2ecc71
dark_green = 0x1f8b4c
blue = 0x3498db
dark_blue = 0x206694
purple = 0x9b59b6
dark_purple = 0x71368a
magenta = 0xe91e63
dark_magenta = 0xad1457
gold = 0xf1c40f
dark_gold = 0xc27c0e
orange = 0xe67e22
dark_orange = 0xa84300
red = 0xe74c3c
dark_red = 0x992d22
lighter_grey = 0x95a5a6
dark_grey = 0x607d8b
light_grey = 0x979c9f
darker_grey = 0x546e7a
blurple = 0x7289da
greyple = 0x99aab5

# ___________
# variables section end

# Ping
@client.command(aliases = ['Ping', 'PING', 'pING', 'ping', ' ping', ' PING', ' pING', ' Ping'])
async def __ping(ctx): 
    ping = client.ws.latency # –ü–æ–ª—É—á–∞–µ–º –ø–∏–Ω–≥ –∫–ª–∏–µ–Ω—Ç–∞

    ping_emoji = 'üü©üî≥üî≥üî≥üî≥' # –≠–º–æ—Ü–∏—è –ø–∏–Ω–≥–∞, –µ—Å–ª–∏ –æ–Ω –º–µ–Ω—å—à–µ 100ms

    if ping > 0.15000000000000000:
        ping_emoji = 'üüßüü©üî≥üî≥üî≥' # –≠–º–æ—Ü–∏—è –ø–∏–Ω–≥–∞, –µ—Å–ª–∏ –æ–Ω –±–æ–ª—å—à–µ 150ms

    if ping > 0.20000000000000000:
        ping_emoji = 'üü•üüßüü©üî≥üî≥' # –≠–º–æ—Ü–∏—è –ø–∏–Ω–≥–∞, –µ—Å–ª–∏ –æ–Ω –±–æ–ª—å—à–µ 200ms

    if ping > 0.25000000000000000:
        ping_emoji = 'üü•üü•üüßüü©üî≥' # –≠–º–æ—Ü–∏—è –ø–∏–Ω–≥–∞, –µ—Å–ª–∏ –æ–Ω –±–æ–ª—å—à–µ 250ms

    if ping > 0.30000000000000000:
        ping_emoji = 'üü•üü•üü•üüßüü©' # –≠–º–æ—Ü–∏—è –ø–∏–Ω–≥–∞, –µ—Å–ª–∏ –æ–Ω –±–æ–ª—å—à–µ 300ms

    if ping > 0.35000000000000000:
        ping_emoji = 'üü•üü•üü•üü•üüß' # –≠–º–æ—Ü–∏—è –ø–∏–Ω–≥–∞, –µ—Å–ª–∏ –æ–Ω –±–æ–ª—å—à–µ 350ms

    if ping > 0.40000000000000000:
        ping_emoji = 'üü•üü•üü•üü•üü•' # –≠–º–æ—Ü–∏—è –ø–∏–Ω–≥–∞, –µ—Å–ª–∏ –æ–Ω –±–æ–ª—å—à–µ 400ms

    message = await ctx.reply('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ. . .') # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è message —Å –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
    await message.edit(content = f'–ü–æ–Ω–≥! {ping_emoji} `{ping * 1000:.0f}ms` :ping_pong:') # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –∏—Ç–æ–≥–æ–≤–æ–µ (–ù–∞ —Å–∞–º –ø–∏–Ω–≥)
    print(f'[Logs:utils] –ü–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞ –±—ã–ª –≤—ã–≤–µ–¥–µ–Ω | {prefix}ping') # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ "ping" –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞
    print(f'[Logs:utils] –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–∏–Ω–≥ == {ping * 1000:.0f}ms | {prefix}ping') # –í—ã–≤–æ–¥ –ø–∏–Ω–≥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
    # Ping end

# statuspage.io
# metrics
# need at least 1 data point for every 5 minutes
# submit random data for the whole day
# need 1 data point every 5 minutes
# submit random data for the whole day
import httplib, urllib, time, random, json

# the following 4 are the actual values that pertain to your account and this specific metric
# need 1 data point every 5 minutes
# submit random data for the whole day
total_points = (60 / 5 * 24)
for i in range(total_points):
  ts = int(time.time()) - (i * 5 * 60)
  value = random.randint(0, 99)
  params = json.dumps({
      "data": {
          "timestamp": ts,
          "value": value
      }
  })
  headers = {"Content-Type": "application/json", "Authorization": "OAuth " + api_key}

  conn = httplib.HTTPSConnection(api_base)
  conn.request("POST", "/pages/" + page_id + "/metrics/" + metric_id + "/data.json", params, headers)
  response = conn.getresponse()

  if (response.status >= 400):
    print f"Error encountered. Please ensure that your page code and authorization key are correct."
    print(response.read())
    break
  else:
    print "Submitted point " + str(i + 1) + " of " + str(total_points)
    time.sleep(1)

# metrics end
# statuspage.ip end
# voice channels


# Help
@client.command(aliases = ['Help', 'help', 'HELP', 'hELP', '—Ö–µ–ª–ø', '–•–µ–ª–ø', '–•–ï–õ–ü', '—Ö–ï–õ–ü'])
async def __help (ctx):
    emb = discord.Embed( title = '–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–º–∞–Ω–¥–∞–º', description = '**–í–ù–ò–ú–ê–ù–ò–ï!** –ë–æ—Ç –µ—â—ë –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!', colour = teal )
    # title - –ñ–∏—Ä–Ω—ã–π –∫—Ä—É–ø–Ω—ã–π —Ç–µ–∫—Å—Ç (–ó–∞–≥–æ–ª–æ–≤–æ–∫) | description - –¢–µ–∫—Å—Ç –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º | colour - –¶–≤–µ—Ç –ø–æ–ª–æ—Å–∫–∏
    emb.set_author(name=f"{ctx.author}",icon_url=ctx.author.avatar.url)
    # –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ê–≤–∞—Ç–∞—Ä –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
    emb.add_field( name = ';help', value = f'`–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —ç—Ç—É –∫–æ–º–∞–Ω–¥—É`', inline=False)
    # TODO - `{prefix}server` `{prefix}profile` 
    emb.add_field( name = ';ping', value = f'`–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –±–æ—Ç–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (ms)`', inline=False)
    # TODO - emb.add_field( name = '–ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ', value = f'`{prefix}mute` `{prefix}unmute` `{prefix}ban` `{prefix}kick` `{prefix}clear` ', inline=False)
    emb.set_thumbnail(url = client.user.avatar.url)
    emb.set_footer( icon_url = client.user.avatar.url, text = f'Rublewka BOT ¬© Copyright 2023 | –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã' )

    await ctx.reply ( embed = emb)
    # –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ embed 

    print(f'[Logs:info] –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–≤–µ–¥–µ–Ω–∞ | {prefix}help ')
    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ "help" –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞

# Filter
#@client.event
#async def on_message( message ):
#    await client.process_commands( message )
#    msg = message.content.lower()
#    with open('prohibitednames.txt') as bad_words:
#    if msg in bad_words:
#        await message.delete()
#        await message.author.send(f'{message.author.name}, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ **Rublewka** –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å/—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ –∏–º–µ–Ω–∞')
#        print('[Logs:moderation] Message {message} has been deleted due to filter violations')
#_______________
# level system

#_______________

#–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç/–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
#\/\/\/

#Kick
#@client.command(aliases = ['Kick', 'kICK', 'KICK', 'kick'])
#@commands.has_permissions ( administrator = True ) # –ö–æ–º–∞–Ω–¥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–º–µ—é—â–∏—Ö —Ä–æ–ª—å —Å –ø—Ä–∞–≤–∞–º–∏ "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
#async def __kick(ctx, member: discord.Member, *, reason = None): # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è __kick(ctx, member: discord.Member, *, reason = None)
    #–ê—Ä–≥—É–º–µ–Ω—Ç—ã: ctx - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    #–ê—Ä–≥—É–º–µ–Ω—Ç—ã: member: discord.Member - "member" ----- –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π —Ç–µ–∫—Å—Ç, –Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É—é member (Discord.Member - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è id —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
    #–ê—Ä–≥—É–º–µ–Ω—Ç—ã: * - –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º
    #–ê—Ä–≥—É–º–µ–Ω—Ç—ã: reason = None - "reason" ----- –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π —Ç–µ–∫—Å—Ç, –Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª reason, "None" - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
#    await ctx.message.add_reaction('‚úÖ') # –î–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ–∞–∫—Ü–∏—é –∫ —Å–æ–æ–±—â–µ–Ω–∏—é —Å –∫–æ–º–∞–Ω–¥–æ–π
#    await member.kick( reason = reason ) # –ö–∏–∫–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –ø—Ä–∏—á–∏–Ω–µ (–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä–∏—á–∏–Ω—É –±–æ—Ç–∞ –≤ –ø—Ä–∏—á–∏–Ω—É –¥–∏—Å–∫–æ—Ä–¥–∞)
#    emb = discord.Embed( title = 'Kicked', description = f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {member}  –±—ã–ª –∫–∏–∫–Ω—É—Ç –ø–æ –ø—Ä–∏—á–∏–Ω–µ { reason } ', colour = discord.Color.red() )
#    emb.set_author( name = client.user.name )
#    emb.set_footer( text = ctx.author.name, icon_url = ctx.author.avatar_url )
#    emb.set_thumbnail(url = client.user.avatar_url)

#    await ctx.send( embed = emb )

#    print(f'[Logs:moderation] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {member} –±—ã–ª –∫–∏–∫–Ω—É—Ç –ø–æ –ø—Ä–∏—á–∏–Ω–µ {reason} | {prefix}kick ')


#@__kick.error
#async def kick_error(ctx, goodbye):
	#if isinstance ( goodbye, commands.MissingRequiredArgument):
		#emb = discord.Embed( title = f'**–ö–æ–º–∞–Ω–¥–∞ "{prefix}–∫–∏–∫"**', description = f'–ò–∑–≥–æ–Ω—è–µ—Ç —É–∫–∞–∑–∞–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è ', colour = discord.Color.red() )
		#emb.set_author(name = ctx.author.name, icon_url = ctx.author.avatar_url)
		#emb.add_field( name = '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ', value = "!–∫–∏–∫ <@‚Å£–£—á–∞—Å—Ç–Ω–∏–∫ | ID>", inline=False)
		#emb.add_field( name = '–ü—Ä–∏–º–µ—Ä', value = "`!–∫–∏–∫ @‚Å£–£—á–∞—Å—Ç–Ω–∏–∫`\n‚îó –ö–∏–∫–Ω–µ—Ç —É–∫–∞–∑–∞–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞.", inline=False)
		#emb.set_thumbnail(url = client.user.avatar_url)
		#emb.set_footer( icon_url = client.user.avatar_url, text = f"Rublewka BOT  ¬© Copyright 2023 | –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã"   )
		#await ctx.send ( embed = emb)
		#print(f"[Logs:error] –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ | {prefix}kick")

	#if isinstance (goodbye, commands.MissingPermissions):
		#emb = discord.Embed( title = f'**–ö–æ–º–∞–Ω–¥–∞ "{prefix}–∫–∏–∫"**', description = f'–ò–∑–≥–æ–Ω—è–µ—Ç —É–∫–∞–∑–∞–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è ', colour = discord.Color.red() )
		#emb.set_author(name = ctx.author.name, icon_url = ctx.author.avatar_url)
		#emb.add_field( name = '–û–®–ò–ë–ö–ê!', value = "–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤!", inline=False)
		#emb.set_thumbnail(url = client.user.avatar_url)
		#emb.set_footer( icon_url = client.user.avatar_url, text = f"Rublewka BOT  ¬© Copyright 2023 | –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã"   )
		#await ctx.send ( embed = emb)
		#print(f"[Logs:Error] [–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å [{ctx.author}] –ø–æ–ø—ã—Ç–∞–ª—Å—è –∫–∏–∫–Ω—É—Ç—å | {prefix}kick")














































































































































































































client.run (settings['TOKEN']) #DON'T TOUCH IT